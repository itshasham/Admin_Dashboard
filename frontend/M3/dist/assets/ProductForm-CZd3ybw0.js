import{a as De,r as m,j as e,A as N}from"./index-C1zVYYn4.js";/* empty css                */import{p as Be}from"./api-error-Dgx8dn8F.js";const H={img:"",title:"",unit:"",parent:"",children:"",price:"",discount:0,quantity:0,brand:{name:"",id:""},category:{name:"",id:""},status:"in-stock",feature:!1,featured:!1,productType:"",description:"",imageURLs:[]},Ne=o=>({name:String((o==null?void 0:o.name)||"").trim(),id:String((o==null?void 0:o.id)||"").trim()}),Te=o=>String(o||"").trim().toLowerCase(),Ee=o=>!o||typeof o!="object"?[]:Array.isArray(o.images)?o.images:Array.isArray(o.data)?o.data:o.data&&Array.isArray(o.data.images)?o.data.images:[],ve=o=>{const f=typeof o=="string"?o:(o==null?void 0:o.img)||(o==null?void 0:o.url)||"",r=String(f||"").trim();return r?{...typeof o=="object"&&o?o:{},img:r,color:typeof o=="object"&&(o==null?void 0:o.color)||{name:"default",value:"#000000"}}:null},w=o=>{const f=Array.isArray(o)?o:[],r=new Set,u=[];return f.forEach(R=>{const x=ve(R);if(!(x!=null&&x.img))return;const S=x.img.toLowerCase();r.has(S)||(r.add(S),u.push(x))}),u},_e=()=>{var de,me,ue,he;const{id:o}=De(),f=!!o,[r,u]=m.useState(H),[R,x]=m.useState(""),[S,K]=m.useState(""),[Q,E]=m.useState(!1),[V,C]=m.useState(""),[Z,$]=m.useState([]),[I,G]=m.useState([]),[D,M]=m.useState(!1),[A,W]=m.useState([]),[B,F]=m.useState(!1),[q,X]=m.useState(!1),[O,ee]=m.useState("additional"),[_,se]=m.useState(!1),[ae,k]=m.useState(""),[z,re]=m.useState(""),[te,ie]=m.useState([]),[b,J]=m.useState({}),L=()=>{try{const s=localStorage.getItem("adminToken");return s?{Authorization:`Bearer ${s}`}:{}}catch{return{}}},ne=s=>{if(!s)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(s))return s;const a=new Date(s);if(!isNaN(a.getTime())){const i=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0");return`${i}-${t}-${l}`}return typeof s=="string"&&s.length>=10?s.slice(0,10):""},ce=s=>{if(s&&/^\d{4}-\d{2}-\d{2}$/.test(s))try{const a=new Date(`${s}T00:00:00.000Z`);return isNaN(a.getTime())?void 0:a.toISOString()}catch{return}},le=s=>{var a;return typeof s=="string"?((a=s.match(/\d+/g))==null?void 0:a.join(""))||"":s},be=s=>{const a=Array.isArray(s)?s.map(i=>String(i||"").trim()).filter(Boolean):[];a.length&&u(i=>{const t=w(i.imageURLs),l=new Set(t.map(c=>c.img.toLowerCase())),n=[...t];return a.forEach(c=>{const d=c.toLowerCase();if(l.has(d))return;l.add(d);const h=ve(c);h&&n.push(h)}),{...i,imageURLs:n}})},ye=async()=>{var s;M(!0);try{console.log("Fetching brands from:",`${N}/brand/all`);const a=await fetch(`${N}/brand/all`,{headers:{...L()},cache:"no-store"});if(console.log("Brands API Status:",a.status,a.statusText),a.status===304){console.log("304 - Not modified, using cached data"),M(!1);return}const t=((s=a.headers.get("content-type"))==null?void 0:s.includes("application/json"))?await a.json().catch(()=>null):null;if(console.log("Brands API Response:",t),console.log("Response headers:",Object.fromEntries(a.headers.entries())),!a.ok)throw console.error("API Error:",a.status,t==null?void 0:t.message),new Error((t==null?void 0:t.message)||"Failed to load brands");let l=[];if(Array.isArray(t))l=t,console.log("Data is direct array");else if(t&&typeof t=="object"){const n=[t.data,t.brands,t.items,t.results,t.list,t.records];for(const c of n)if(Array.isArray(c)){l=c,console.log("Found brands in:",Object.keys(t).find(d=>t[d]===c));break}if(l.length===0){const c=(d,h=0)=>{if(h>3||!d||typeof d!="object")return null;for(const p in d){if(Array.isArray(d[p]))return d[p];const j=c(d[p],h+1);if(j)return j}return null};l=c(t)||[],l.length>0&&console.log("Found nested array")}}console.log("Final brands array:",l),console.log("Number of brands:",l.length),l.length>0&&console.log("First brand example:",l[0]),G(Array.isArray(l)?l:[])}catch(a){console.error("Failed to load brands:",a),G([])}finally{M(!1)}},we=async()=>{var s;F(!0);try{console.log("Fetching categories from:",`${N}/category/all`);const a=await fetch(`${N}/category/all`,{headers:{...L()},cache:"no-store"});if(console.log("Categories API Status:",a.status,a.statusText),a.status===304){console.log("304 - Not modified, using cached data"),F(!1);return}const t=((s=a.headers.get("content-type"))==null?void 0:s.includes("application/json"))?await a.json().catch(()=>null):null;if(console.log("Categories API Response:",t),!a.ok)throw console.error("Categories API Error:",a.status,t==null?void 0:t.message),new Error((t==null?void 0:t.message)||"Failed to load categories");const c=(d=>d?Array.isArray(d)?d:Array.isArray(d.result)?d.result:Array.isArray(d.data)?d.data:d.data&&Array.isArray(d.data.result)?d.data.result:d.data&&Array.isArray(d.data.data)?d.data.data:[]:[])(t).filter(d=>Te(d==null?void 0:d.productType)==="beauty");console.log("Final categories array:",c),console.log("Number of categories:",c.length),c.length>0&&console.log("First category example:",c[0]),W(Array.isArray(c)?c:[])}catch(a){console.error("Failed to load categories:",a),W([])}finally{F(!1)}};m.useEffect(()=>{(async()=>{var a,i;if(f)try{const t=await fetch(`${N}/product/single-product/${o}`,{headers:{...L()}}),l=await t.json();if(!t.ok)throw new Error((l==null?void 0:l.message)||"Failed to load product");const n=(l==null?void 0:l.data)||(l==null?void 0:l.product)||l||H,c=le(n.unit||"");u({...H,...n,brand:Ne(n==null?void 0:n.brand),category:Ne(n==null?void 0:n.category),feature:!!((n==null?void 0:n.feature)??(n==null?void 0:n.featured)??!1),featured:!!((n==null?void 0:n.feature)??(n==null?void 0:n.featured)??!1),unit:c,imageURLs:w(n==null?void 0:n.imageURLs)});const d=ne((a=n==null?void 0:n.offerDate)==null?void 0:a.startDate)||"",h=ne((i=n==null?void 0:n.offerDate)==null?void 0:i.endDate)||"";x(d),K(h)}catch(t){C(t.message||"Failed to load product")}})(),ye(),we()},[o,f]);const Y=async(s=z)=>{se(!0),k("");try{const a=new URL(`${N}/cloudinary/images`);String(s||"").trim()&&a.searchParams.set("q",String(s).trim());const i=await fetch(a.toString(),{headers:{...L()},cache:"no-store"}),t=await i.json().catch(()=>({}));if(!i.ok)throw new Error((t==null?void 0:t.message)||(t==null?void 0:t.error)||"Failed to load image manager");const l=Ee(t).map((c,d)=>({id:(c==null?void 0:c._id)||(c==null?void 0:c.publicId)||(c==null?void 0:c.id)||`manager-image-${d}`,publicId:(c==null?void 0:c.publicId)||(c==null?void 0:c.id)||"",url:String((c==null?void 0:c.url)||(c==null?void 0:c.img)||"").trim()})).filter(c=>c.url),n=new Map;l.forEach(c=>{n.has(c.url)||n.set(c.url,c)}),ie(Array.from(n.values()))}catch(a){k(a.message||"Failed to load image manager"),ie([])}finally{se(!1)}};m.useEffect(()=>{q&&Y()},[q]);const g=s=>{const{name:a,value:i,type:t,checked:l}=s.target;if(a==="unit"){u(n=>({...n,unit:le(i)}));return}if(a==="feature"||a==="featured"){const n=t==="checkbox"?l:!!i;u(c=>({...c,feature:n,featured:n}));return}u(n=>({...n,[a]:t==="checkbox"?l:i}))},Se=s=>{const a=s.target.value,i=I.find(t=>(t._id||t.id||t.uuid)===a);if(console.log("Selected brand:",i),i){const t=i._id||i.id||i.uuid||"",l=i.name||i.brandName||i.title||"";u(n=>({...n,brand:{name:l,id:t}}))}else u(t=>({...t,brand:{name:"",id:""}}))},Ce=s=>{const a=s.target.value,i=A.find(t=>(t._id||t.id||t.uuid)===a);if(console.log("Selected category:",i),i){const t=i._id||i.id||i.uuid||"",l=i.parent||i.name||i.categoryName||i.title||"";u(n=>({...n,category:{name:l,id:t}}))}else u(t=>({...t,category:{name:"",id:""}}))},Ie=s=>{u(a=>({...a,imageURLs:w(a.imageURLs).filter((i,t)=>t!==s)}))},oe=(s="additional")=>{ee(s==="main"?"main":"additional"),J({}),k(""),X(!0)},T=()=>{X(!1),ee("additional"),J({}),k(""),re("")},Ae=s=>{const a=String(s||"").trim();if(a){if(O==="main"){u(i=>({...i,img:a})),T();return}J(i=>({...i,[a]:!i[a]}))}},ke=()=>{if(O==="main")return;const s=Object.keys(b).filter(a=>b[a]);if(!s.length){k("Select at least one image.");return}be(s),T()},U=Object.keys(b).filter(s=>b[s]).length,P=O==="main",Le=()=>{var a,i,t,l,n,c,d,h,p,j,y;const s=[];return(a=r.title)!=null&&a.trim()||s.push("Title is required"),(!r.price||r.price<=0)&&s.push("Valid price is required"),(t=(i=r.brand)==null?void 0:i.name)!=null&&t.trim()||s.push("Brand name is required"),(n=(l=r.brand)==null?void 0:l.id)!=null&&n.trim()||s.push("Brand ID is required"),(d=(c=r.category)==null?void 0:c.name)!=null&&d.trim()||s.push("Category name is required"),(p=(h=r.category)==null?void 0:h.id)!=null&&p.trim()||s.push("Category ID is required"),(j=r.children)!=null&&j.trim()||s.push("Children field is required"),(y=r.productType)!=null&&y.trim()||s.push("Product type is required"),s},Ue=async s=>{var i,t,l,n,c,d,h,p,j;s.preventDefault(),E(!0),C(""),$([]);const a=Le();if(a.length>0){C("Please fix the highlighted product details before saving."),$(a),E(!1),window.scrollTo({top:0,behavior:"smooth"});return}try{const y=f?`${N}/product/edit-product/${o}`:`${N}/product/add`,Pe=f?"PATCH":"POST",ge={img:r.img,title:r.title,unit:r.unit,parent:r.parent,children:r.children,price:r.price===""?void 0:Number(r.price),discount:r.discount===""?void 0:Number(r.discount),quantity:r.quantity===""?void 0:Number(r.quantity),brand:{name:((i=r.brand)==null?void 0:i.name)||"",id:((t=r.brand)==null?void 0:t.id)||""},category:{name:((l=r.category)==null?void 0:l.name)||"",id:((n=r.category)==null?void 0:n.id)||""},status:r.status,feature:!!r.feature,featured:!!r.feature,productType:r.productType,description:r.description,imageURLs:w(r.imageURLs)},fe=ce(R),pe=ce(S);fe&&pe&&(ge.offerDate={startDate:fe,endDate:pe});const Re={...ge,brand:{name:((c=r.brand)==null?void 0:c.name)||"",id:((d=r.brand)==null?void 0:d.id)||""},category:{name:((h=r.category)==null?void 0:h.name)||"",id:((p=r.category)==null?void 0:p.id)||""},children:r.children||"",imageURLs:w(r.imageURLs)},v=await fetch(y,{method:Pe,headers:{"Content-Type":"application/json",...L()},body:JSON.stringify(Re)}),xe=((j=v.headers.get("content-type"))==null?void 0:j.includes("application/json"))?await v.json().catch(()=>({})):{};if(!v.ok){console.error("Product save error",{status:v.status,data:xe});const $e=v.status===401?"Your session has expired. Please log in again.":v.status===403?"You do not have permission to add or edit products.":`Save failed (${v.status}). Please review and try again.`,je=Be(xe,$e);C(je.summary),$(je.issues),window.scrollTo({top:0,behavior:"smooth"});return}window.location.href="/admin/products"}catch(y){C(y.message||"Save failed"),$([]),window.scrollTo({top:0,behavior:"smooth"})}finally{E(!1)}};return e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"page-header fancy",children:[e.jsxs("div",{children:[e.jsx("h2",{children:f?"Edit Product":"New Product"}),e.jsx("p",{className:"muted",children:"Create product entries with confidence and clarity"})]}),e.jsx("button",{className:"btn secondary",type:"button",onClick:()=>window.location.href="/admin/dashboard",children:"â† Back"})]}),V&&e.jsxs("div",{className:"error-panel",role:"alert","aria-live":"polite",children:[e.jsx("p",{className:"error-panel-title",children:V}),Z.length>0&&e.jsx("ul",{className:"error-panel-list",children:Z.map((s,a)=>e.jsx("li",{children:s},`${s}-${a}`))})]}),e.jsxs("div",{className:"product-form-shell",children:[e.jsxs("div",{className:"product-side",children:[e.jsxs("div",{className:"card product-preview-card",children:[e.jsx("div",{className:"product-preview-media",children:r.img?e.jsx("img",{src:r.img,alt:"Product preview",onError:s=>{s.currentTarget.style.visibility="hidden"}}):e.jsx("div",{className:"preview-placeholder",children:"No main image"})}),e.jsxs("div",{className:"product-preview-body",children:[e.jsx("span",{className:"product-preview-title",children:r.title||"Untitled Product"}),e.jsxs("div",{className:"product-preview-row",children:[e.jsx("span",{children:"Price"}),e.jsx("strong",{children:r.price||"0.00"})]}),e.jsxs("div",{className:"product-preview-row",children:[e.jsx("span",{children:"Status"}),e.jsx("strong",{className:"status-text",children:r.status})]}),e.jsxs("div",{className:"product-preview-row",children:[e.jsx("span",{children:"Discount"}),e.jsxs("strong",{children:[r.discount||0,"%"]})]}),e.jsxs("div",{className:"product-preview-row",children:[e.jsx("span",{children:"Stock"}),e.jsxs("strong",{children:[r.quantity||0," units"]})]}),e.jsxs("div",{className:"product-preview-row",children:[e.jsx("span",{children:"Brand"}),e.jsx("strong",{children:((de=r.brand)==null?void 0:de.name)||"Unassigned"})]}),e.jsxs("div",{className:"product-preview-row",children:[e.jsx("span",{children:"Category"}),e.jsx("strong",{children:((me=r.category)==null?void 0:me.name)||"Unassigned"})]})]})]}),e.jsxs("div",{className:"card product-media-card",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h3",{children:"Media"}),e.jsx("span",{className:"hint",children:"Show the product clearly"})]}),e.jsx("label",{children:"Main Image URL"}),e.jsxs("div",{className:"image-input-row image-main-url-row",children:[e.jsx("input",{name:"img",placeholder:"https://example.com/image.jpg",value:r.img,onChange:g}),e.jsx("button",{type:"button",className:"btn secondary",onClick:()=>oe("main"),children:"Select Image URL"})]}),e.jsx("div",{className:"preview-row",children:e.jsx("div",{className:"preview",children:r.img?e.jsx("img",{src:r.img,alt:"Main Image Preview",onError:s=>{s.currentTarget.style.visibility="hidden"}}):e.jsx("div",{className:"preview-placeholder",children:"No main image"})})}),e.jsx("label",{children:"Additional Images"}),e.jsxs("div",{className:"actions",style:{marginTop:8},children:[e.jsx("button",{type:"button",className:"btn secondary",onClick:()=>oe("additional"),children:"Select Multiple Images"}),Array.isArray(r.imageURLs)&&r.imageURLs.length>0&&e.jsx("button",{type:"button",className:"btn ghost",onClick:()=>u(s=>({...s,imageURLs:[]})),children:"Clear All"})]}),e.jsx("div",{className:"subtext",children:"Choose images in Image Manager, then click Done to add the URLs."}),r.imageURLs&&r.imageURLs.length>0&&e.jsx("div",{className:"image-grid",children:w(r.imageURLs).map((s,a)=>e.jsxs("div",{className:"image-tile",children:[e.jsx("img",{src:s.img,alt:`Product image ${a+1}`,onError:i=>{i.currentTarget.style.visibility="hidden"}}),e.jsx("button",{type:"button",className:"image-remove",onClick:()=>Ie(a),children:"x"})]},a))}),(!r.imageURLs||r.imageURLs.length===0)&&e.jsx("div",{className:"image-empty",children:"No additional images added yet"})]})]}),e.jsx("div",{className:"card compact product-form-card",children:e.jsxs("form",{onSubmit:Ue,className:"product-form-grid",children:[e.jsxs("div",{className:"section appear",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h3",{children:"Basics"}),e.jsx("span",{className:"hint",children:"Key info customers see first"})]}),e.jsxs("div",{className:"form-table",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-cell",children:["Title *",e.jsx("span",{className:"subtext",children:"Keep it short and scannable"})]}),e.jsx("div",{className:"form-cell",children:e.jsx("input",{name:"title",placeholder:"Product title",value:r.title,onChange:g,required:!0})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Price *"}),e.jsx("div",{className:"form-cell",children:e.jsx("input",{name:"price",type:"number",step:"0.01",placeholder:"0.00",value:r.price,onChange:g,required:!0})})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-cell",children:["Unit",e.jsx("span",{className:"subtext",children:"Numeric only"})]}),e.jsx("div",{className:"form-cell",children:e.jsx("input",{name:"unit",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g., 3",value:r.unit,onChange:g})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Quantity"}),e.jsx("div",{className:"form-cell",children:e.jsx("input",{name:"quantity",type:"number",placeholder:"0",value:r.quantity,onChange:g})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Discount"}),e.jsx("div",{className:"form-cell",children:e.jsx("input",{name:"discount",type:"number",placeholder:"0",value:r.discount,onChange:g})})]})]})]}),e.jsxs("div",{className:"section appear delay-1",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h3",{children:"Classification"}),e.jsx("span",{className:"hint",children:"Organize products for better discovery"})]}),e.jsxs("div",{className:"form-table",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Parent"}),e.jsx("div",{className:"form-cell",children:e.jsx("input",{name:"parent",placeholder:"Parent",value:r.parent,onChange:g})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Children *"}),e.jsx("div",{className:"form-cell",children:e.jsx("input",{name:"children",placeholder:"Children",value:r.children,onChange:g,required:!0})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Product Type *"}),e.jsx("div",{className:"form-cell",children:e.jsx("input",{name:"productType",placeholder:"grocery, electronics",value:r.productType,onChange:g,required:!0})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Status"}),e.jsx("div",{className:"form-cell",children:e.jsxs("div",{className:"status-row",children:[e.jsxs("select",{name:"status",value:r.status,onChange:g,children:[e.jsx("option",{value:"in-stock",children:"in-stock"}),e.jsx("option",{value:"out-of-stock",children:"out-of-stock"}),e.jsx("option",{value:"discontinued",children:"discontinued"})]}),e.jsxs("span",{className:"inline-badge",children:[e.jsx("span",{className:"dot"}),r.status]})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Featured Product"}),e.jsx("div",{className:"form-cell",children:e.jsxs("label",{className:"inline-switch",htmlFor:"feature-toggle",children:[e.jsx("input",{id:"feature-toggle",name:"feature",type:"checkbox",checked:!!r.feature,onChange:g}),e.jsx("span",{children:r.feature?"Yes - show on featured listings":"No - keep hidden from featured listings"})]})})]})]})]}),e.jsxs("div",{className:"section appear delay-2",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h3",{children:"Brand & Category"}),e.jsx("span",{className:"hint",children:"Link product to its brand and category"})]}),e.jsxs("div",{className:"form-table",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Brand *"}),e.jsxs("div",{className:"form-cell",children:[e.jsxs("select",{value:r.brand.id||"",onChange:Se,required:!0,disabled:D,children:[e.jsx("option",{value:"",children:"-- Select a brand --"}),I.map((s,a)=>{const i=s._id||s.id||s.uuid||`temp_${a}`,t=s.name||s.brandName||s.title||`Brand ${a+1}`;return console.log(`Brand ${a}:`,{brandId:i,brandName:t,fullBrand:s}),e.jsx("option",{value:i,children:t},i)})]}),D&&e.jsx("span",{className:"subtext",children:"Loading brands..."}),!D&&I.length===0&&e.jsxs("span",{className:"subtext",children:["No brands available. ",e.jsx("a",{href:"/admin/brands/new",children:"Add a brand first"})]}),!D&&I.length>0&&e.jsxs("span",{className:"subtext",children:["Found ",I.length," brand(s)."]})]})]}),((ue=r.brand)==null?void 0:ue.name)&&e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Selected Brand"}),e.jsx("div",{className:"form-cell",children:e.jsxs("span",{className:"inline-badge",children:[e.jsx("strong",{children:r.brand.name})," (ID: ",r.brand.id,")"]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Category *"}),e.jsxs("div",{className:"form-cell",children:[e.jsxs("select",{value:r.category.id||"",onChange:Ce,required:!0,disabled:B,children:[e.jsx("option",{value:"",children:"-- Select a category --"}),A.map((s,a)=>{const i=s._id||s.id||s.uuid||`temp_${a}`,t=s.parent||s.name||s.categoryName||s.title||`Category ${a+1}`;return console.log(`Category ${a}:`,{categoryId:i,categoryName:t,fullCategory:s}),e.jsx("option",{value:i,children:t},i)})]}),B&&e.jsx("span",{className:"subtext",children:"Loading categories..."}),!B&&A.length===0&&e.jsxs("span",{className:"subtext",children:["No categories available. ",e.jsx("a",{href:"/admin/categories/new",children:"Add a category first"})]}),!B&&A.length>0&&e.jsxs("span",{className:"subtext",children:["Found ",A.length," category(ies)."]})]})]}),((he=r.category)==null?void 0:he.name)&&e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Selected Category"}),e.jsx("div",{className:"form-cell",children:e.jsxs("span",{className:"inline-badge",children:[e.jsx("strong",{children:r.category.name})," (ID: ",r.category.id,")"]})})]})]})]}),e.jsxs("div",{className:"section appear",style:{gridColumn:"1 / -1"},children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h3",{children:"Description"}),e.jsx("span",{className:"hint",children:"Highlight benefits and key features"})]}),e.jsx("div",{className:"form-table",children:e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Description"}),e.jsx("div",{className:"form-cell",children:e.jsx("textarea",{name:"description",placeholder:"Describe the product",value:r.description,onChange:g,rows:5})})]})})]}),e.jsxs("div",{className:"section appear",style:{gridColumn:"1 / -1"},children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h3",{children:"Offers"}),e.jsx("span",{className:"hint",children:"Optional promotional date range"})]}),e.jsxs("div",{className:"form-table",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Offer Start Date"}),e.jsx("div",{className:"form-cell",children:e.jsx("input",{type:"date",value:R,onChange:s=>x(s.target.value)})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Offer End Date"}),e.jsx("div",{className:"form-cell",children:e.jsx("input",{type:"date",value:S,onChange:s=>K(s.target.value)})})]})]})]}),e.jsx("div",{className:"sticky-actions appear",style:{gridColumn:"1 / -1"},children:e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"btn",type:"submit",disabled:Q,children:Q?"Saving...":"Save Product"}),e.jsx("button",{className:"btn secondary",type:"button",onClick:()=>window.location.href="/admin/products",children:"Cancel"})]})})]})})]}),q&&e.jsx("div",{className:"image-manager-modal-overlay",role:"dialog","aria-modal":"true",onClick:T,children:e.jsxs("div",{className:"image-manager-modal-card",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h3",{children:P?"Select Main Image":"Select Additional Images"}),e.jsx("span",{className:"hint",children:P?"Click one image to auto-fill Main Image URL.":"Select multiple images and add all selected URLs automatically."})]}),e.jsxs("div",{className:"image-input-row image-input-row-three",children:[e.jsx("input",{value:z,onChange:s=>re(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),Y(s.currentTarget.value))},placeholder:"Search by image id or URL"}),e.jsx("button",{type:"button",className:"btn ghost",onClick:()=>Y(z),disabled:_,children:_?"Loading...":"Search"}),e.jsx("button",{type:"button",className:"btn secondary",onClick:T,children:"Close"})]}),ae&&e.jsx("div",{className:"error",style:{marginTop:8},children:ae}),e.jsx("div",{className:"image-manager-modal-body",children:e.jsxs("div",{className:"image-manager-grid",children:[te.map((s,a)=>e.jsxs("button",{type:"button",className:`image-tile selectable ${!P&&b[s.url]?"selected":""}`,onClick:()=>Ae(s.url),children:[e.jsx("img",{src:s.url,alt:s.publicId||`manager-image-${a+1}`}),e.jsx("span",{className:"image-select-chip",children:P?"Set Main":b[s.url]?"Selected":"Select"})]},`${s.id}-${a}`)),!_&&!te.length&&e.jsx("div",{className:"image-empty",children:"No images found in image manager."})]})}),!P&&e.jsxs("div",{className:"image-manager-modal-footer",children:[e.jsxs("span",{className:"subtext",children:[U," selected"]}),e.jsx("button",{type:"button",className:"btn",onClick:ke,disabled:!U,children:U?U===1?"Done (1 image)":`Done (${U} images)`:"Done"})]})]})})]})};export{_e as default};
