import{r as n,j as t,A as h}from"./index-BmyIwrNX.js";/* empty css                 */const b=()=>{const[u,m]=n.useState([]),[j,i]=n.useState(!1),[c,o]=n.useState(""),d=()=>{try{const e=localStorage.getItem("adminToken");return e?{Authorization:`Bearer ${e}`}:{}}catch{return{}}},g=e=>e?Array.isArray(e)?e:Array.isArray(e.result)?e.result:Array.isArray(e.data)?e.data:e.data&&Array.isArray(e.data.result)?e.data.result:e.data&&Array.isArray(e.data.data)?e.data.data:[]:[],l=async()=>{var e;i(!0),o("");try{const s=await fetch(`${h}/category/all`,{headers:{...d()},cache:"no-store"});if(s.status===304){i(!1);return}const a=((e=s.headers.get("content-type"))==null?void 0:e.includes("application/json"))?await s.json().catch(()=>null):null;if(!s.ok)throw new Error((a==null?void 0:a.message)||"Failed to load categories");const f=g(a);m(f)}catch(s){o(s.message||"Failed to load categories")}finally{i(!1)}},x=async e=>{if(window.confirm("Delete this category?"))try{const s=await fetch(`${h}/category/delete/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",...d()}}),r=await s.json().catch(()=>({}));if(!s.ok)throw new Error((r==null?void 0:r.message)||"Delete failed");await l()}catch(s){alert(s.message||"Delete failed")}};return n.useEffect(()=>{l()},[]),j?t.jsx("div",{children:"Loading..."}):c?t.jsx("div",{className:"error",children:c}):t.jsxs("div",{className:"page-container",children:[t.jsxs("div",{className:"page-header fancy",children:[t.jsxs("div",{children:[t.jsx("h2",{children:"Categories"}),t.jsx("p",{className:"muted",children:"Create, view and manage product categories"})]}),t.jsxs("div",{className:"actions",children:[t.jsx("button",{className:"btn secondary",onClick:()=>window.location.href="/admin/dashboard",children:"â† Back"}),t.jsx("button",{className:"btn",onClick:()=>window.location.href="/admin/categories/new",children:"+ New Category"})]})]}),t.jsxs("table",{className:"table animated-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Image"}),t.jsx("th",{children:"Parent"}),t.jsx("th",{children:"Product Type"}),t.jsx("th",{children:"Status"}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:u.map((e,s)=>t.jsxs("tr",{className:"fade-in-row",children:[t.jsx("td",{children:e!=null&&e.img?t.jsx("img",{className:"brand-thumb",src:e.img,alt:(e==null?void 0:e.parent)||"category",onError:r=>{r.currentTarget.style.visibility="hidden"}}):t.jsx("div",{className:"brand-thumb",style:{visibility:"hidden"}})}),t.jsx("td",{children:e.parent}),t.jsx("td",{children:e.productType}),t.jsx("td",{children:t.jsx("span",{className:`status-badge ${e.status==="Show"?"status-active":e.status==="Hide"?"status-inactive":"status-unknown"}`,children:e.status})}),t.jsx("td",{children:t.jsxs("div",{className:"actions",children:[t.jsx("button",{className:"btn",onClick:()=>window.location.href=`/admin/categories/${e._id}`,children:"Edit"}),t.jsx("button",{className:"btn danger",onClick:()=>x(e._id),children:"Delete"})]})})]},e._id||s))})]})]})};export{b as default};
