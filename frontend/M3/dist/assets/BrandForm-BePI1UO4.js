import{a as k,r as m,j as e,A as p}from"./index-BmyIwrNX.js";/* empty css              */const u={logo:"",name:"",description:"",status:"active"},T=()=>{const{id:o}=k(),t=!!o,[i,j]=m.useState(u),[v,x]=m.useState(!1),[f,h]=m.useState(""),g=()=>{try{const s=localStorage.getItem("adminToken");return s?{Authorization:`Bearer ${s}`}:{}}catch{return{}}};m.useEffect(()=>{(async()=>{if(t)try{const n=await fetch(`${p}/brand/get/${o}`,{headers:{...g()}}),a=await n.json();if(!n.ok)throw new Error((a==null?void 0:a.message)||"Failed to load brand");const r=(a==null?void 0:a.data)||a||u;j({...u,...r})}catch(n){h(n.message||"Failed to load brand")}})()},[o,t]);const c=s=>{const{name:n,value:a}=s.target;j(r=>({...r,[n]:a}))},N=s=>{var n;if(!s)return"Validation failed";if(typeof s.message=="string"&&s.message.trim())return s.message;if(s.errors&&typeof s.errors=="object"){const a=Object.keys(s.errors)[0];if(a){const r=s.errors[a];if(Array.isArray(r)&&r[0])return`${a}: ${r[0]}`;if(typeof r=="string")return`${a}: ${r}`;if(r&&typeof r.message=="string")return`${a}: ${r.message}`}}return Array.isArray(s.details)&&((n=s.details[0])!=null&&n.message)?s.details[0].message:"Validation error. Please check your inputs."},y=async s=>{var n;s.preventDefault(),x(!0),h("");try{const a=t?`${p}/brand/edit/${o}`:`${p}/brand/add`,r=t?"PATCH":"POST",{name:b,logo:w,description:S,status:C}=i,B={name:b,logo:w,description:S,status:C},l=await fetch(a,{method:r,headers:{"Content-Type":"application/json",...g()},body:JSON.stringify(B)}),d=((n=l.headers.get("content-type"))==null?void 0:n.includes("application/json"))?await l.json().catch(()=>({})):{};if(!l.ok){const $=l.status===400?N(d):(d==null?void 0:d.message)||"Save failed";throw new Error($)}window.location.href="/admin/brands"}catch(a){h(a.message||"Save failed"),window.scrollTo({top:0,behavior:"smooth"})}finally{x(!1)}};return e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"page-header fancy",children:[e.jsxs("div",{children:[e.jsx("h2",{children:t?"Edit Brand":"New Brand"}),e.jsx("p",{className:"muted",children:"Present your brand with clarity and polish"})]}),e.jsx("button",{className:"btn secondary",type:"button",onClick:()=>window.location.href="/admin/dashboard",children:"â† Back"})]}),f&&e.jsx("div",{className:"error",children:f}),e.jsx("div",{className:"card compact",children:e.jsxs("form",{onSubmit:y,className:"product-form form-grid-2",children:[e.jsxs("div",{className:"section appear",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h3",{children:"Basics"}),e.jsx("span",{className:"hint",children:"Core information"})]}),e.jsxs("div",{className:"form-table",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Name"}),e.jsx("div",{className:"form-cell",children:e.jsx("input",{name:"name",placeholder:"Brand name",value:i.name,onChange:c,required:!0})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Status"}),e.jsx("div",{className:"form-cell",children:e.jsxs("select",{name:"status",value:i.status,onChange:c,required:!0,children:[e.jsx("option",{value:"active",children:"active"}),e.jsx("option",{value:"inactive",children:"inactive"})]})})]})]})]}),e.jsxs("div",{className:"section appear",children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h3",{children:"Media"}),e.jsx("span",{className:"hint",children:"Visual identity"})]}),e.jsx("div",{className:"form-table",children:e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Logo URL"}),e.jsxs("div",{className:"form-cell",children:[e.jsx("input",{name:"logo",placeholder:"https://example.com/logo.png",value:i.logo,onChange:c,required:!0}),e.jsx("div",{className:"preview-row",children:e.jsx("div",{className:"preview",children:i.logo?e.jsx("img",{src:i.logo,alt:"Logo Preview",onError:s=>{s.currentTarget.style.visibility="hidden"}}):e.jsx("div",{className:"preview-placeholder",children:"No logo"})})})]})]})})]}),e.jsxs("div",{className:"section appear",style:{gridColumn:"1 / -1"},children:[e.jsxs("div",{className:"section-title",children:[e.jsx("h3",{children:"Description"}),e.jsx("span",{className:"hint",children:"Tell your brand story"})]}),e.jsx("div",{className:"form-table",children:e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-cell",children:"Description"}),e.jsx("div",{className:"form-cell",children:e.jsx("textarea",{name:"description",placeholder:"Sportswear and footwear brand",value:i.description,onChange:c,rows:5})})]})})]}),e.jsx("div",{className:"sticky-actions appear",style:{gridColumn:"1 / -1"},children:e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"btn",type:"submit",disabled:v,children:v?"Saving...":"Save Brand"}),e.jsx("button",{className:"btn secondary",type:"button",onClick:()=>window.location.href="/admin/brands",children:"Cancel"})]})})]})})]})};export{T as default};
